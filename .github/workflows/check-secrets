name: Check Secrets

on:
  workflow_dispatch:  # Allows manual triggering of the workflow

jobs:
  check-secrets:
    runs-on: ubuntu-latest

    steps:
      - name: Check out the code
        uses: actions/checkout@v3

      - name: Check Secrets Values
        env:
          RENDEZVOUS_SERVER: ${{ secrets.RENDEZVOUS_SERVER }}
          RS_PUB_KEY: ${{ secrets.RS_PUB_KEY }}
        run: |
          echo "Checking Secrets..."
          
          # Print the length of secrets to verify they are not empty
          echo "RENDEZVOUS_SERVER length: ${#RENDEZVOUS_SERVER}"
          echo "RS_PUB_KEY length: ${#RS_PUB_KEY}"

          # Uncomment these lines if you want to see the actual values (not recommended for sensitive data)
          # echo "RENDEZVOUS_SERVER: $RENDEZVOUS_SERVER"
          # echo "RS_PUB_KEY: $RS_PUB_KEY"

          if [[ -z "$RENDEZVOUS_SERVER" ]]; then
            echo "RENDEZVOUS_SERVER is empty or not set!"
            exit 1
          fi
          
          if [[ -z "$RS_PUB_KEY" ]]; then
            echo "RS_PUB_KEY is empty or not set!"
            exit 1
          fi
          
          echo "Secrets are correctly set."
